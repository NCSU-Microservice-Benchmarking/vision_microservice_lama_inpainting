name: CI

on:
  push:
    branches: [ "main" ]
  pull_request:
  merge_group:

jobs:
  build:
    runs-on: ubuntu-20.04

    steps:
      - uses: actions/checkout@v3

      - name: Create and activate the venv
        run: |
          which -a python3
          for p in $(which -a python3); do echo $p && $p --version; done
          python3 -m venv .venv
          source .venv/bin/activate

      - name: Install requirements
        run: | 
          pip install numpy==1.26.2
          pip install -r requirements.txt

      - name: Check the installations
        run: |
          simple_lama --help
          flask --version

